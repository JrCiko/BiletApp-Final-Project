<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Raporlar</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
</head>
<body class="bg-light">
<div class="container mt-5">
    <div class="card shadow">
        <div class="card-header bg-dark text-white">
            <h4>Raporlar</h4>
        </div>
        <div class="card-body">
            <!-- Bugün satılan bilet sayısı -->
            <p class="fs-5">
                <strong>Bugün satılan bilet sayısı:</strong>
                <span class="text-success" th:text="${bugunSatilan}">0</span>
            </p>

            <hr class="my-4">
            <h5 class="mb-3">Etkinlik Bazlı Satış Raporu</h5>

            <table class="table table-bordered table-hover">
                <thead class="table-light">
                    <tr>
                        <th>#</th>
                        <th>Etkinlik</th>
                        <th>Toplam Koltuk</th>
                        <th>Satılan Koltuk</th>
                        <th>Doluluk (%)</th>
                    </tr>
                </thead>
                <tbody>
                    <tr th:each="rapor, iter : ${etkinlikRaporlari}">
                        <td th:text="${iter.index + 1}">1</td>
                        <td th:text="${rapor.etkinlikAd}">Etkinlik</td>
                        <td th:text="${rapor.toplamKoltuk}">0</td>
                        <td th:text="${rapor.rezerveKoltukSayisi}">0</td>
                        <td th:text="${rapor.dolulukOrani} + '%'">0%</td>
                    </tr>
                </tbody>
            </table>
            <hr class="my-4">
            <h5>İptal Talep Raporu</h5>

            <ul class="list-group">
                <li class="list-group-item">
                    <strong>Bu hafta gelen iptal talepleri:</strong>
                    <span th:text="${thisWeekRefunds}">0</span>
                </li>
                <li class="list-group-item">
                    <strong>Geçen hafta gelen iptal talepleri:</strong>
                    <span th:text="${lastWeekRefunds}">0</span>
                </li>
                <li class="list-group-item">
                    <strong>Değişim farkı:</strong>
                    <span th:text="${fark >= 0} ? '+' + ${fark} : ${fark}"></span>
                </li>
            </ul>
            <a href="/admin" class="btn btn-secondary mt-3">Admin Paneline Dön</a>
        </div>
    </div>
</div>
</body>
</html>
